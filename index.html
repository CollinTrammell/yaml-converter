<!DOCTYPE html>

<html>
	<head>
		<title>Web Test</title>
		<script type="text/javascript" src="yaml.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
		<link type="text/css" rel="stylesheet" href="stylesheet.css">



		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>
		<script>

		 	$(document).ready(function() {

		 		

				YAML.load('tenant-assets.yaml', function(json) {
					var $assetTypes = $("#asset_types");
					var $non_BHATypes = $("#non_asset_bha_items");
					console.log(json);


					function grandChild(key, value) {
						//if (value) {
							var valType = typeof value;
							if (valType == 'string' || valType == 'number' || valType == 'boolean') {
								html += "<li>" + key + ": " + value + "</li>";
							}
							else if (valType == 'object') {
								html += "<li>" + key + ": "; 
								html += "<ul>";
								for (var key in value) {			
									grandChild(key, value[key]);
								}
								// html += "</li>"; //Not sure why it was put this way to begin with, but seems to be wrong.  
								// html += "</ul>"; //Still worked though?

								html += "</ul>";
								html += "</li>";
							}
						//}
					}

					var html = "";
					random(json.asset_types, $assetTypes);
					random(json.non_asset_bha_items, $non_BHATypes);

					function random(ran, id) {
						for (var i=0; i < ran.length; i++) {
							var arrayLvl = ran[i];
							html = "";
							html += "<div class='itemBody'>";
									html += "<h4 type='button' class='itemHeader'>" + arrayLvl["display_name"] + "</h4>";
									html += "<ul class='outermostLayer collapse'>"; //adding the collapse class will make this disapear
										for (var key in arrayLvl) {
											grandChild(key, arrayLvl[key]);
										}
									html += "</ul>";
							html += "</div>";
							id.append(html); 
						}
					}

					$(".itemHeader").click(function(){
						$(this).next().collapse("toggle");
					});

				});
			});

		</script>
		
	</head>
	<body>
		<div class="tab">
			<button class="tablinks" onclick="openTab(event, 'asset_types')">Assets</button>
			<button class="tablinks" onclick="openTab(event, 'non_asset_bha_items')">BHA Items</button>
			<button class="tabLinks" onclick="openTab(event, 'work_flow')">Work Flow</button>
		</div>

		<div id="asset_types" class="tabcontent"><h1>Assets:</h1></div>
		<div id="non_asset_bha_items" class="tabcontent"><h1>BHA Items:</h1></div>
		<div id="work_flow" class="tabcontent"><h1>I have no content yet</h1></div>


		<script type="text/javascript">
			
			function openTab(evt, idName) {
			    var i, tabcontent, tablinks;
			    tabcontent = document.getElementsByClassName("tabcontent");
			    for (i = 0; i < tabcontent.length; i++) {
			        tabcontent[i].style.display = "none";
			    }
			    tablinks = document.getElementsByClassName("tablinks");
			    for (i = 0; i < tablinks.length; i++) {
			        tablinks[i].className = tablinks[i].className.replace(" active", "");
			    }
			    document.getElementById(idName).style.display = "block";
			    evt.currentTarget.className += " active";
			}
		</script>
	</body>
</html>